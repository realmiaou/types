  Skip to content
    GitLab
    Search GitLab
    /
    
    34
    3
    89
    Help
    Thibaut Mottet
    nuxtjs-auth-fedidnuxtjs-auth-fedid
    Project information
    Repository
    Issues0
    Merge requests0
    CI/CD
    Deployments
    Packages and registries
    Settings
    WeParisWeParis
    commonscommons
    nuxtjs-auth-fedidnuxtjs-auth-fedid
    master
    auth-fedid
    .gitlab-ci.yml

  fix: Remove token
    Thibaut Mottet authored 1 year ago
    61e9f6cf
    .gitlab-ci.yml
    646 bytes
  default:
    image: node:latest
    before_script:
      - npm ci --cache .npm --prefer-offline
      - |
        {
          echo "@${CI_PROJECT_ROOT_NAMESPACE}:registry=${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/packages/npm/"
          echo "${CI_API_V4_URL#https?}/projects/${CI_PROJECT_ID}/packages/npm/:_authToken=${NPM_TOKEN}"
        } | tee --append .npmrc
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
      - .npm/
  workflow:
    rules:
      - if: $CI_COMMIT_BRANCH
  variables:
    NPM_TOKEN: $NPM_TOKEN
  stages:
    - release
  publish:
    stage: release
    script:
      - npm run semantic-release
    rules:
      - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
